# ============================================
# DATABASE
# ============================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=postgres
DB_NAME=gerald

# ============================================
# API
# ============================================
API_PORT=8000
BANK_API_URL=http://localhost:8001
LEDGER_WEBHOOK_URL=http://localhost:8002

# ============================================
# DATADOG
# ============================================
DD_AGENT_HOST=localhost
DD_DOGSTATSD_PORT=8125
SERVICE_NAME=gerald-gateway
DD_API_KEY=api-key
DD_SITE=datadoghq.com

# ============================================
# BNPL TIER LIMITS (in cents)
# ============================================
# Tier A - Premium customers (highest limit)
BNPL_TIER_A_LIMIT=20000

# Tier B - Standard customers
BNPL_TIER_B_LIMIT=12000

# Tier C - Limited customers
BNPL_TIER_C_LIMIT=6000

# Tier D - Trial customers (minimum limit, everyone gets at least this)
BNPL_TIER_D_LIMIT=2000

# ============================================
# BNPL TIER SCORE THRESHOLDS
# ============================================
# Minimum score required for each tier
BNPL_TIER_A_MIN_SCORE=75
BNPL_TIER_B_MIN_SCORE=55
BNPL_TIER_C_MIN_SCORE=35
# Tier D has no minimum - it's the fallback for everyone

# ============================================
# COOLDOWN SETTINGS
# ============================================
# Hours between allowed advances (default 72 = 3 days)
COOLDOWN_HOURS=72

# ============================================
# RISK CALCULATION WEIGHTS
# ============================================
# These weights determine how much each component affects the final score
# Must sum to 1.0
RISK_BALANCE_WEIGHT=0.5
RISK_INCOME_SPEND_WEIGHT=0.3
RISK_NSF_WEIGHT=0.2

# Balance negative cap (cents) - balances below this get score 0
RISK_BALANCE_NEG_CAP=10000

# NSF penalty per event (points deducted from nsf_score per NSF event)
RISK_NSF_PENALTY=25.0

# Payback penalty (points deducted if payback_label is "negative")
RISK_PAYBACK_PENALTY=10.0

# ============================================
# UTILIZATION SCORING (Gaussian Parameters)
# ============================================
# Utilization = debits / paycheck
# Format: mu (ideal value), sigma (tolerance), weight (contribution to composite)

# Ideal utilization percentage (0.6 = 60% of paycheck spent is ideal)
UTIL_MU=0.6
UTIL_SIGMA=0.3
UTIL_WEIGHT=0.45

# ============================================
# BURN DAYS SCORING (Gaussian Parameters)
# ============================================
# Burn days = how many days until paycheck is depleted
# Ideal: 30 days (paycheck lasts a month)

BURN_MU=30.0
BURN_SIGMA=15.0
BURN_WEIGHT=0.35

# ============================================
# DAILY SPEND SCORING (Gaussian Parameters)
# ============================================
# Daily spend ratio = avg_daily_spend / paycheck
# Ideal: 0.033 (3.3% of paycheck per day = 100% over 30 days)

SPEND_MU=0.033
SPEND_SIGMA=0.02
SPEND_WEIGHT=0.20

# ============================================
# UTILIZATION LABEL THRESHOLDS
# ============================================
# Composite score thresholds for risk labels
# Score >= threshold gets that label

LABEL_HEALTHY=80
LABEL_MEDIUM_RISK=60
LABEL_HIGH_RISK=40
LABEL_VERY_HIGH_RISK=20
# Below 20 = critical-risk

# ============================================
# UTILIZATION PENALTY IN FINAL SCORE
# ============================================
# Points deducted from final_score based on utilization label
UTIL_PENALTY_HIGH_RISK=15.0
UTIL_PENALTY_MEDIUM_RISK=7.5
